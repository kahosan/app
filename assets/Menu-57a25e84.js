import{j as o}from"./index-021ad583.js";import{P as v,s as y}from"./messenger-provider-a886fcd3.js";import{c as I}from"./classnames-7ca44501.js";const a="ppd-menu";function j(s){const{items:l,onSelect:i,closeWhenSelect:h=!0}=s,f=React.useRef(null),[d,m]=React.useState(0),r=React.useRef(d),c=React.useRef([]);function x(e,t){var n;r.current=t,m(t),i==null||i(e),h&&((n=f.current)==null||n.hide())}return o.jsx(v,{ref:f,tabIndex:0,style:s.style,className:s.className,trigger:"click",placement:"bottom-start",offset:[0,5],onKeydown:e=>{if(["ArrowDown","ArrowUp"].includes(e.key)){e.stopPropagation(),e.preventDefault();const t=1,n=r.current+(e.key==="ArrowDown"?1:-1);r.current=Math.max(0,Math.min(n,l.length-1)),y(c.current[r.current>n?Math.max(n-t,0):Math.min(n+t,l.length-1)]),c.current[r.current].focus()}},onVisibleChange:e=>{e&&setTimeout(()=>{c.current[r.current].focus()},30)},content:o.jsx("div",{className:a,children:l.map((e,t)=>{if(e==="slider")return o.jsx("div",{className:`${a}-slider`},t);function n(){x(typeof e=="string"?{id:e,title:e}:e,t)}const{title:p,children:R}=typeof e=="string"?{title:e,children:e}:{title:e.title??e.id,children:e.content??e.title??e.id};return o.jsx("div",{ref:u=>c.current[t]=u,tabIndex:0,className:I(`${a}-item`,d===t&&`${a}-item__active`),title:p,onClick:n,onKeyDown:u=>{u.key==="Enter"&&n()},children:R},t)})}),children:s.children})}export{j as M};
